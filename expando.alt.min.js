var expandoalt=function(){var q=/([^\{\}\+\\]*)([\\\+\{\}])?/gm,h=/\#([a-z][a-z\-\_0-9]*)/i,r=/\.([a-z][a-z\-\_0-9]*)/gi,k=/^[\s]*([a-z]*)/i,l=/\*([0-9]*)/,s=String.prototype.replace,m=function(){this.tag="div";this.classList=[];this.expansion=this.modifiers=this.id="";this.children=[];this.count=1},n=function(a,c,b){var e=!1;if(0===a.expansion.indexOf("="))return(a=/\=(.*)\}/.exec(a.expansion))?a[1]:"";b=b||0;switch(a.tag.toLowerCase()){case "link":case "meta":case "img":case "area":case "source":case "br":case "basefront":case "col":case "hr":case "input":case "keygen":case "embed":case "keygen":case "param":case "source":case "track":case "wbr":e=
!0;break;case "":return""}var d="<"+a.tag,d=d+(a.id?' id="'+a.id+'"':""),d=d+(a.modifiers?" "+a.modifiers:"");if(a.classList.length){for(var d=d+' class="',f=0;f<a.classList.length;f++)d+=(0<f?" ":"")+a.classList[f].slice(1);d+='"'}d+=(e&&c&&!a.children.length?" /":"")+">";if(a.children.length)for(f=0;f<a.children.length;f++)d+=n(a.children[f],c,b+1);d+=e&&0===a.children.length?"":"</"+a.tag+">";if(1<a.count){c=d;a=a.count;for(b="";0<a;)1==a%2&&(b+=c),c+=c,a>>=1;a=b}else a=d;return a},t=Array.prototype.push,
p=function(a){for(var c,b=[],e=0;c=a.shift();)switch(b[e]||(b[e]=new m),b[e].expansion+=c,c.slice(-1)){case "{":t.apply(b[e].children,p(a));break;case "}":return b;case "\\":if(c=a[0])b[e].expansion=b[e].expansion.slice(0,-1),b[e].expansion+=c[0].toString(),a[0]=c.slice(1);break;case "+":e++}return b},u=function(a){for(var c="",b;b=a.shift();)c+=n(b.expand());return c};m.prototype.expand=function(){var a=this.expansion;this.id=((a.match(h)?a.match(h)[1]:this.id)||this.id).trim();this.tag=((a.match(k)?
a.match(k)[0]:this.tag)||this.tag).trim();this.classList=a.match(r)||[];this.count=a.match(l)?parseInt(a.match(l)[1]):1;if(this.children.length)for(a=0;a<this.children.length;a++)this.children[a].expand();return this};return function(a,c){if(c){var b;a=s.call(a,/\%([a-z][a-z0-9\_\.]*)/gmi,function(a,d){for(var f=d.split(".").reverse(),g=c;b=f.pop();)g=g[b];return g})}return u(p(a.match(q)))||"<div></div>"}}();