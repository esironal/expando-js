var expando=function(){var h=/\#([a-z][a-z\-\_0-9]*)/i,m=/\.([a-z][a-z\-\_0-9]*)/gi,k=/^[\s]*([a-z]*)/i,l=/\*([0-9]*)/,f={node:function(){this.tag="div";this.classList=[];this.expansion=this.modifiers=this.id="";this.children=[];this.count=1},expand:function(a,d){var b="";return f.treeify(a.split("")).forEach(function(a){a.expand();b+=f.EM(a,d)}),b},treeify:function(a){for(var d="",b=[],e=0;d=a.shift();)switch("undefined"==typeof b[e]&&(b[e]=new f.node),d){case "{":b[e].children=f.treeify(a);break;
case "}":return b;case "+":e++;break;case "[":for(var c=!1,g=!0;0<a.length&&g;)d=a.shift(),c?(b[e].modifiers+=d,c=!1):(b[e].modifiers+="]"!=d&&"\\"!=d?d:"",c="\\"==d,g="]"!=d);break;default:b[e].expansion+=d}return b},EM:function(a,d,b){if(""===a.expansion.trim()||0===a.children.length)return"";b=b||0;var e=!1;switch(a.tag.toLowerCase()){case "link":case "meta":case "img":case "area":case "source":case "br":case "basefront":case "col":case "hr":case "input":case "keygen":case "embed":case "keygen":case "param":case "source":case "track":case "wbr":e=
!0}var c="<"+a.tag,c=c+(a.id?' id="'+a.id+'"':""),c=c+(a.modifiers?" "+a.modifiers:"");a.classList.length&&(c+=' class="',a.classList.forEach(function(a,b){c+=(0<b?" ":"")+a.match(/[\.]([a-z\_\-]*)/i)[1]}),c+='"');c+=(e&&d&&!a.children.length?" /":"")+">";a.children.length&&a.children.forEach(function(a){c+=f.EM(a,d,b+1)});for(var e=c+=!e||a.children.length?"</"+a.tag+">":"",g=2;g<=a.count;g++)c+=e;return c}};return f.node.prototype.expand=function(){var a=this.expansion;this.id=((a.match(h)?a.match(h)[1]:
this.id)||this.id).trim();this.tag=((a.match(k)?a.match(k)[0]:this.tag)||this.tag).trim();for(var d=this.classList=a.match(m)||[],b=0;b<d.length;b++)d[b]=d[b].trim();if(this.count=a.match(l)?parseInt(a.match(l)[1]):1,this.children)for(b=0;b<this.children.length;b++)this.children[b].expand()},f}();
