(function(){function g(a,c){a=" "+h.call(a,n," ");if(c){var b;a=h.call(a,p,function(a,d){for(var f=d.split(".").reverse(),g=c;b=f.pop();)g=g[b];return a[0]+g})}return q(k(a.match(r)))||"<div></div>"}function q(a){for(var c="",b;b=a.shift();)c+=l(b.expand());return c}function k(a){for(var c,b=[],e=0;c=a.shift();)switch(b[e]||(b[e]=new m),b[e].expansion+=c,c.slice(-1)){case "{":s.apply(b[e].children,k(a));break;case "}":return b;case "\\":if(c=a[0])b[e].expansion=b[e].expansion.slice(0,-1),b[e].expansion+=
c[0].toString(),a[0]=c.slice(1);break;case "+":e++}return b}function l(a,c,b){var e=!1,d;if(d=t.exec(a.expansion))return d[1].trim();b=b||0;switch(a.a.toLowerCase()){case "link":case "meta":case "img":case "area":case "source":case "br":case "basefront":case "col":case "hr":case "input":case "keygen":case "embed":case "param":case "source":case "track":case "wbr":e=!0;break;case "":return""}d="<"+a.a;d+=a.id?' id="'+a.id+'"':"";d+=a.b?" "+a.b:"";if(a.classList.length){d+=' class="';for(var f=0;f<
a.classList.length;f++)d+=(0<f?" ":"")+a.classList[f].slice(1);d+='"'}d+=(e&&c&&!a.children.length?" /":"")+">";if(a.children.length)for(f=0;f<a.children.length;f++)d+=l(a.children[f],c,b+1);d+=e&&0===a.children.length?"":"</"+a.a+">";if(1<a.count){c=d;a=a.count;for(b="";0<a;)1==a%2&&(b+=c),c+=c,a>>=1;a=b}else a=d;return a}function m(){this.a="div";this.classList=[];this.expansion=this.b=this.id="";this.children=[];this.count=1}var r=/([^\{\}\+\\]*)([\\\+\{\}])?/gm,u=/\#([a-z][a-z\-\_0-9]*)/i,v=/\.([a-z][a-z\-\_0-9]*)/gi,
w=/^[\s]*([a-z]*)/i,x=/\*([0-9]*)/,y=/\[((?:\\\]|[^\]])*)\]/gm,p=/[^\\]%([a-z][a-z0-9\_\.]*)/gmi,t=/^\=(.*)\}/,n=/(\r\n|\n|\r)/gm,h=String.prototype.replace,s=Array.prototype.push;g.compile=function(a){return Function.prototype.bind?g.bind(this,a):function(c){return g(a,c)}};m.prototype.expand=function(){var a=this.expansion,c=this,b;this.id=(((b=a.match(u))?b[1]:this.id)||this.id).trim();this.a=(((b=a.match(w))?b[0]:this.a)||this.a).trim();this.classList=a.match(v)||[];this.count=(b=a.match(x))?
parseInt(b[1]):1;h.call(a,y,function(a,b){c.b+=b+" "});if(this.children.length)for(a=0;a<this.children.length;a++)this.children[a].expand();return this};return g})();